<script type="text/javascript">		function batal(){		document.location.href = '<?=base_url().'index.php/refund'?>';	}		$(function(){		$("#tanggal").datepicker({dateFormat: 'yy-mm-dd', yearRange: '2001:2021' });	})		function save_data(){				var isi = document.getElementById('inputList').innerHTML;		var var_jumlah_debet = document.getElementById('jumlah_pemasukan').value;		var var_jumlah_kredit = document.getElementById('jumlah_pengeluaran').value;		var var_jumlah_refund = document.getElementById('jumlah_refund').value;		if( isi == false){			document.getElementById('alert_').innerHTML = '<ul class="message error grid_12"><li>Nilai data refund tidak boleh kosong</li><li class="close-bt"></li></ul><br>';		}else if(var_jumlah_refund!=0){						document.getElementById('alert_').innerHTML = '<ul class="message error grid_12"><li>Nilai dari pemasukan dan pengeluaran harus seimbang atau sama dengan 0</li><li class="close-bt"></li></ul><br>';		}else if((var_jumlah_debet==0) && (var_jumlah_kredit==0)){			document.getElementById('alert_').innerHTML = '<ul class="message error grid_12"><li>Nilai tidak boleh kosong</li><li class="close-bt"></li></ul><br>';		}else{			document.getElementById('alert_').innerHTML = '';			//alert('berisi');			document.forms["form1"].submit();		}		}</script><script type="text/javascript">			var newTotal=0;			var newTotal_k=0;			var counter = 0;			var cancel_b = 0;		function reset_txt(){			document.getElementById('debet0').value=0;			document.getElementById('kredit0').value=0;						document.getElementById('jumlah_pemasukan').value=0;						document.getElementById('jumlah_pengeluaran').value=0;						document.getElementById('jumlah_refund').value=0;					}		$(document).ready(function(){			$("#getakun0").fancybox({				'width'         : 470,				'max-height'    : 500,				'autoDimensions': false,				'autoScale'     : false,				'transitionIn'  : 'elastic',				'transitionOut' : 'elastic',			});            $('#addInputs').click(function(event){                    event.preventDefault();                    addInputEl() ;            });						$('#removeBtn').click(function(event){                    event.preventDefault();                    removeInputElm() ;            });            /*            $('.textInput').live('blur', function(e) {                prodCode = this.value;                    addElement(prodCode) ;            });                        $('.textInput').live('focus', function(e) {                    prodCode = this.value;                    checkElement(prodCode) ;            });*/			change_radio();			reset_txt();						        });				function addInputEl(){			counter = counter+1;			var val_radio = $('input:radio[name=id_pilihan]:checked').val();			inCon = document.getElementById('inputList');			newP = document.createElement('p');						newInput = document.createElement('input');			newInput2 = document.createElement('input');			newInput3 = document.createElement('a');;			newInput4 = document.createElement('input');			newInput6 = document.createElement('input');			newInput5 = document.createElement('input');									newInput_tr = document.createElement('tr');			newInput_tr.setAttribute('align','center');			newInput_td = document.createElement('td');			newInput_td2 = document.createElement('td');			newInput_td3 = document.createElement('td');			newInput_td4 = document.createElement('td');			newInput_td5 = document.createElement('td');			newInput_td6 = document.createElement('td');			newInput_tdnull = document.createElement('td');						newInput2.setAttribute('class', 'textInput');			newInput2.setAttribute('name', 'kredit[]');			newInput2.setAttribute('type', 'text');			newInput2.setAttribute('onchange', "updateTotal_k('kredit[]')");						/*newInput6.setAttribute('type','button');			newInput6.setAttribute('onclick',"removeInputElmById(" + cancel_b + ")");			newInput6.setAttribute('value','Remove');			newInput6.setAttribute('name','btn_batal[]');*/						newInput6.setAttribute('type','hidden');			newInput6.setAttribute('onclick',"removeInputElmById(" + cancel_b + ")");			newInput6.setAttribute('value','Remove');			newInput6.setAttribute('name','btn_batal[]');						newInput.setAttribute('class', 'textInput');			newInput.setAttribute('name', 'debet[]');			newInput.setAttribute('type', 'text');			newInput.setAttribute('onchange', "updateTotal_d('debet[]')");						newInput3.setAttribute('href', "<?=base_url().'index.php/refund/show_akun/'?>"+ counter + "/transaksi");			newInput3.setAttribute('id', 'addAkun' + counter);			newInput3.setAttribute('class', 'add_akun');			newInput3.innerHTML="Add Akun";						//newInput3.setAttribute('value', "Tambah Akun");						newInput4.setAttribute('class', 'textInput');			newInput4.setAttribute('name', 'akunid[]');			newInput4.setAttribute('type', 'text');			newInput4.setAttribute('id', 'akunid' + counter);						newInput5.setAttribute('class', 'textInput');			newInput5.setAttribute('name', 'nakun[]');			newInput5.setAttribute('type', 'text');			newInput5.setAttribute('id', 'nakun' + counter);						newInput_td.appendChild(newInput);  //debet			newInput_td2.appendChild(newInput2); //kredit			newInput_td3.appendChild(newInput3);			newInput_td4.appendChild(newInput4);			newInput_td5.appendChild(newInput5);			newInput_td6.appendChild(newInput6); //adding button cancel						newInput_tr.appendChild(newInput_td3);			newInput_tr.appendChild(newInput_td4);			newInput_tr.appendChild(newInput_td5);			//pembelian==pemasukan==kas di debet			cancel_b = cancel_b +1;			if (val_radio=='pemasukan'){				newInput_tr.appendChild(newInput_tdnull);				newInput_tr.appendChild(newInput_td2);								newInput_tr.appendChild(newInput_td6);				inCon.appendChild(newInput_tr);			}else if(val_radio=='pengeluaran'){				newInput_tr.appendChild(newInput_td);				newInput_tr.appendChild(newInput_tdnull);								newInput_tr.appendChild(newInput_td6);				inCon.appendChild(newInput_tr);			}else{				alert('Silahkan pilih terlebih dahulu refund pembelian atau refund penjualan pada ID Pilihan');			}						$("a.add_akun").fancybox({'width': 340,				'width'         : 470,				'max-height'    : 500,				'autoDimensions': false,				'autoScale'     : false,				'transitionIn'  : 'elastic',				'transitionOut' : 'elastic',			});					}				function removeInputElm(){			tagAll = document.getElementsByTagName("*");			inCon = document.getElementById('inputList');			var jumlah = 0;			for (var i=0;i<tagAll.length;i++){				if (tagAll[i].getAttribute("name")=='btn_batal[]') {jumlah++};			}			jumlah = Number(jumlah);			newP = document.getElementsByTagName('tr');			child=inCon.children[jumlah-1];			inCon.removeChild(child);		}				function change_radio(){			tagAll = document.getElementsByTagName("*");			inCon = document.getElementById('inputList');			var jumlah = 0;				for (var i=0;i<tagAll.length;i++){					if (tagAll[i].getAttribute("name")=='btn_batal[]') {						jumlah++;					}				}			jumlah = Number(jumlah);							for (var j=0;j<jumlah;j++){				child=inCon.children[0];				inCon.removeChild(child);			}						var val_radio = $('input:radio[name=id_pilihan]:checked').val();			reset_txt();			if (val_radio=='pemasukan'){				document.getElementById('kredit0').readOnly =true ;				document.getElementById('debet0').readOnly =false ;			}else if(val_radio=='pengeluaran'){				document.getElementById('debet0').readOnly =true ;				document.getElementById('kredit0').readOnly =false ;			}		}		function removeInputElmById(numb){			inCon = document.getElementById('inputList');			newP = document.getElementsByTagName('tr');			child=inCon.children[numb];			inCon.removeChild(child);						//replaceChild() 		}				function updateTotal_d(s){			var allEls=document.getElementsByTagName("*");			newTotal = 0;				for(var i=0;i<allEls.length;i++)				{					if(allEls[i].getAttribute("name")!=s)continue;					if(isNaN(allEls[i].value))continue;					//newTotal+=new Number(allEls[i].value);					newTotal = newTotal + Number(allEls[i].value);				}			var f=document.getElementById("jumlah_pemasukan");			f.value= newTotal;			sum_total();			}				function updateTotal_k(s){			var allEls_k=document.getElementsByTagName("*");			newTotal_k = 0;				for(var i=0;i<allEls_k.length;i++)				{					if(allEls_k[i].getAttribute("name")!=s)continue;					if(isNaN(allEls_k[i].value))continue;					//newTotal_k+=new Number(allEls_k[i].value);					newTotal_k = newTotal_k + Number(allEls_k[i].value);				}					var f=document.getElementById("jumlah_pengeluaran");				f.value= newTotal_k;				sum_total();		}				function sum_total(){			var e=document.getElementById("jumlah_refund");			var f=document.getElementById("jumlah_pemasukan");			var g = document.getElementById("jumlah_pengeluaran");						e.value= f.value - g.value;		}</script>	<?php 		if(validation_errors())		{	?>			<ul class="message error grid_12">				<li><?=validation_errors()?></li>				<li class="close-bt"></li>			</ul>		<?php		} 	?>	<div id="alert_"></div><br><section class="grid_12">	<div class="block-border">		<?php			$attributes = array('name' => 'form1', 'id' => 'form1', 'class'=>'block-content form');			echo form_open('refund/insert', $attributes);		?>			<h1>Kas Dan Bank > Add Refund</h1>						<fieldset class="grey-bg margin">											<div class="columns">									<p class="colx3-left">						<label for="complex-en-url">GLID :</label>						<span class="relative">								<input type="text" name="id_refund" id="id_refund" value="<?=$results->row()->GLID?>" readonly="true">						</span>					</p>											<p class="colx3-center">						<label for="complex-en-url">Pilihan :</label>						<span class="relative">						<?php 							if ($results->row()->PO_ID == 'PO'){								echo '<input type="radio" name="id_pilihan" value="pengeluaran" checked="checked" onchange="change_radio()" /> Penjualan';								echo '<input type="radio" name="id_pilihan" value="pemasukan" onchange="change_radio()" /> Pembelian<br/>';							}else if ($results->row()->PO_ID == 'SO'){								echo '<input type="radio" name="id_pilihan" value="pengeluaran" onchange="change_radio()" /> Penjualan';								echo '<input type="radio" name="id_pilihan" value="pemasukan" checked="checked" onchange="change_radio()" /> Pembelian<br/>';							}else{								echo '<input type="radio" name="id_pilihan" value="pengeluaran" onchange="change_radio()" /> Penjualan';								echo '<input type="radio" name="id_pilihan" value="pemasukan" onchange="change_radio()" /> Pembelian<br/>';							}						?>						</span>					</p>										<p class="colx3-right">						<span class="relative">							<span class="input-type-text margin-right relative">								<input type="text" name="tanggal" id="tanggal" class="datepicker" value="<?=date('Y-m-d')?>">								<img onclick="javascript:klick_tanggal()" src="<?=base_url()?>asset/admin/images/icons/fugue/calendar-month.png" width="16" height="16">							</span>						</span>					</p>				</div>			</fieldset>			<fieldset>						<div class="columns">							<p class="colx3-left">								<input name="addInputs" id="addInputs" type="button" value="Add Row" />								<input name="removeBtn" id="removeBtn" type="button" value="Remove Row"  />							</p>						</div>												<table class="table" border="1" cellspacing="0" width="100%">							<thead>								<tr>									<th scope="col">Pilih Akun</th>									<th scope="col">Akun Id</th>									<th scope="col">Nama Akun</th>									<th scope="col">Pemasukan</th>									<th scope="col">Pengeluaran</th>									<th scope="col">Batal</th>								</tr>							</thead>							<tbody id="id="items">									<tr align="center" border="1">										<td>											<a id="getakun0" href="<?=base_url().'index.php/refund/show_akun/0/kas'?>">Add Akun</a>										</td>										<td><input class="textInput" type="text" name="akunid[]" id="akunid0" value=""></td>										<td><input class="textInput" type="text" name="nakun[]" id="nakun0" value=""></td>										<td><input class="textInput" type="text" name="debet[]" id="debet0" onchange="updateTotal_d('debet[]')" value=""></td>										<td><input class="textInput" type="text" name="kredit[]" id="kredit0" onchange="updateTotal_k('kredit[]')" value=""></td>										<td></td>									</tr>								<tbody id="inputList">								</tbody>								<tr align="center" border="1">									<td></td>									<td></td>									<td></td>									<td><input type="text" name="jumlah_pemasukan" id="jumlah_pemasukan" value="" readonly="true"></td>									<td><input type="text" name="jumlah_pengeluaran" id="jumlah_pengeluaran" value="" readonly="true"></td>									<td></td>								</tr>								<tr align="center">									<td colspan="3"></td>									<td colspan="2" align="center"><input type="text" name="jumlah_refund" id="jumlah_refund" value="" readonly="true"></td>									<td></td>								</tr>							</tbody>						</table>						<table class="table" border="1" cellspacing="0" width="100%">														</table>			</fieldset>			<div id="tab-settings" class="tabs-content">					<button type="button" onclick="javascript:save_data();"><img src="<?=base_url()?>asset/admin/images/icons/fugue/tick-circle.png" width="16" height="16"> Simpan</button>					<button type="button" onclick="javascript:batal();" class="red">Batal</button> 					</div>						</form>					</div>	</section>